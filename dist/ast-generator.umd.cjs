(function(t,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(t=typeof globalThis<"u"?globalThis:t||self,s(t["ast-generator"]={}))})(this,function(t){"use strict";var f=Object.defineProperty;var m=(t,s,e)=>s in t?f(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var i=(t,s,e)=>m(t,typeof s!="symbol"?s+"":s,e);class s{constructor(r){i(this,"raw","");i(this,"cursor",0);this.raw=r}get current(){return this.raw[this.cursor]}get next(){return this.raw[++this.cursor]}get prev(){return this.raw[--this.cursor]}matches(r){return this.raw.slice(this.cursor,this.cursor+r.length)===r}before(r){return this.raw.slice(this.cursor-r.length,this.cursor)===r}after(r){return this.raw.slice(this.cursor+1,this.cursor+r.length+1)===r}distanceTo(r){return this.raw.indexOf(r,this.cursor)-this.cursor-1}closest(r){return r.map(o=>[o,this.distanceTo(o)]).sort((o,n)=>o[1]-n[1])}startTransaction(){const{cursor:r}=this;function o(){this.cursor=r}return o.bind(this)}getUntil(r){const o=this.raw.indexOf(r,this.cursor),n=this.raw.slice(this.cursor,o);return this.cursor+=o,n}slice(r){if(r<0)throw new RangeError(`Cannot slice backwards from ${this.cursor} to ${r}.`);return this.raw.slice(this.cursor,this.cursor+=r)}move(r){return this.cursor+=r,this}moveTo(r){return this.cursor=r,this}jumpTo(r){return this.cursor=this.raw.indexOf(r,this.cursor)}consume(r){for(;this.matches(r);)this.cursor+=r.length}}class e{constructor({components:r={}}={}){i(this,"components",{});this.components=r}parse(r){const o=new s(r);do for(const n in this.components){const u=this.components[n];u.abs=o,u.run()}while(o.next!==void 0)}}class h{constructor({structure:r=[]}={}){i(this,"structure");i(this,"abs");this.structure=r}run(){}}function a(){return new h}t.Parser=e,t.component=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
